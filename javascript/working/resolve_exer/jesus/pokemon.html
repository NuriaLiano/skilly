<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .resaltado {
            background-color: greenyellow;
        }
        table, tbody, th, tr, td {
            border-collapse: collapse;
            border: solid 2px black;
        }
    </style>
    <script> 
        function addResponse(element) {
            // Recuperar la lista de pokemons seleccionados o inicializarla si no existe
            let arrayPokemons = JSON.parse(localStorage.getItem("pokemons")) || [];

            let pokemonSeleccionado = element.cells[0].textContent;

            // Comprobar si el Pokémon ya está seleccionado
            let index = arrayPokemons.indexOf(pokemonSeleccionado);

            if (index === -1) { // Si el Pokémon no está en la lista y la lista tiene menos de 3 elementos
                if (arrayPokemons.length < 3) {
                    arrayPokemons.push(pokemonSeleccionado);
                    element.classList.add('resaltado');
                } else {
                    alert('Ya has seleccionado 3 Pokémons. No puedes seleccionar más.');
                }
            } else { // Si el Pokémon ya está en la lista, eliminarlo (deseleccionar)
                arrayPokemons.splice(index, 1);
                element.classList.remove('resaltado');
            }

            // Actualizar la selección en localStorage
            localStorage.setItem("pokemons", JSON.stringify(arrayPokemons));

            // Refrescar el resaltado de las filas
            resaltar();
        }

        function resaltar() {
            let arrayPokemons = JSON.parse(localStorage.getItem("pokemons")) || [];
            let filas = document.querySelectorAll('#tTablePokemon tr');

            filas.forEach(function(fila) {
                let NombrePokemon = fila.cells[0].textContent;
                if (arrayPokemons.includes(NombrePokemon)) {
                    fila.classList.add("resaltado");
                } else {
                    fila.classList.remove("resaltado");
                }
            });
        }

        window.onload = resaltar;
    </script>
</head>
<body>
    <header>Pokemon más fuerte</header>
    <main>
        <table >
            <tbody id="tTablePokemon">
                <tr onclick="addResponse(this)">
                    <td >Mewtwo</td>
                    <td><img src="https://images.wikidexcdn.net/mwuploads/wikidex/thumb/d/d3/latest/20190408034831/Mewtwo.png/200px-Mewtwo.png" alt="Mewtwo"></td>
                </tr>
                <tr onclick="addResponse(this)">
                    <td>Rayquaza</td>
                    <td><img src="https://images.wikidexcdn.net/mwuploads/wikidex/thumb/d/d3/latest/20190408034831/Mewtwo.png/200px-Mewtwo.png" alt="Mewtwo"></td>
                </tr>
                <tr onclick="addResponse(this)">
                    <td>pokemon3</td>
                    <td><img src="https://images.wikidexcdn.net/mwuploads/wikidex/thumb/d/d3/latest/20190408034831/Mewtwo.png/200px-Mewtwo.png" alt="Mewtwo"></td>
                </tr>
                <tr onclick="addResponse(this)">
                    <td>pokemon4</td>
                    <td><img src="https://images.wikidexcdn.net/mwuploads/wikidex/thumb/d/d3/latest/20190408034831/Mewtwo.png/200px-Mewtwo.png" alt="Mewtwo"></td>
                </tr>
            </tbody>
        </table>
    </main>
    <a href="/nacionalidad.html">atrás</a>
    <a href="/paises.html">siguiente</a>
</body>
</html>